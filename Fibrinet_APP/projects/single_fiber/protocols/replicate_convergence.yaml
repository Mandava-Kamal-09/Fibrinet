# Protocol: Replicate Convergence Study
# =====================================
# Determine how many replicates are needed for stable statistics.
#
# Purpose: Guide experimental design by showing convergence of
# mean and standard deviation estimates with replicate count.
#
# Expected outputs:
#   - sweeps/replicate_convergence/sweep_summary.csv
#   - sweeps/replicate_convergence/runs/*.csv
#
# Analysis approach:
#   1. Run with high replicate count (100+)
#   2. Subsample at different replicate counts (10, 20, 30, 50, 100)
#   3. Compute mean/std at each subsample size
#   4. Plot convergence: error bars should stabilize by N~30-50
#
# Run with:
#   python -m projects.single_fiber.src.single_fiber.enzyme_models.sweep_runner \
#       projects/single_fiber/protocols/replicate_convergence.yaml

base_config:
  model:
    law: hooke
    hooke:
      k_pN_per_nm: 0.1
      L0_nm: 20.0
  geometry:
    x1_nm: [0, 0, 0]
    x2_nm: [100, 0, 0]
  dynamics:
    dt_us: 0.1
    gamma_pN_us_per_nm: 1.0
  loading:
    v_nm_per_us: 0.5
    t_end_us: 200.0

# Single parameter combination with many replicates
hazard_model: exponential_strain

parameter_grid:
  lambda0: [0.005]  # Single value
  alpha: [5.0]      # Single value

# High replicate count for convergence analysis
n_replicates: 100
base_seed: 777
output_dir: sweeps/replicate_convergence

description: |
  Replicate convergence study.
  Use 100 replicates to study how mean/std estimates stabilize.

  Post-hoc analysis steps:
  1. Load sweep_summary.csv
  2. Subsample at N=10, 20, 30, 50, 100
  3. Compute mean/std at each N
  4. Plot coefficient of variation vs N

  Typical result: CV stabilizes by N~30-50 for rupture time distributions.
